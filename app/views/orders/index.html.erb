<h1>Orders</h1>
<ul id="filters">
  <% @filters.each do |filter| %>
    <li><%= link_to filter.status.capitalize, orders_path(:filter => filter.status)%></li>
  <% end %>
</ul>

</table>
  <h3>Order Status Summary</h3>
  <table class="table table-striped" id="status_counts">
  <% @statuses.each do |status, count| %>
    <tr><td><%= "#{status.capitalize}: #{count}" %></td></tr>
  <% end %>
</table>

<table class="table table-striped">
  <thead>
    <tr>
      <th>ID</th>
      <th>Status</th>
      <th>User ID</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @orders.each do |order| %>
      <tr id="<%= dom_id order %>">
        <td><%= link_to order.id.to_s, order_path(order) %></td>
        <td><%= order.status %></td>
        <td><%= order.user_id %></td>
        <td>
          <% case order.status %>
          <% when "pending" %>
            <%= link_to "Cancel Order", order_path(order, :order => {:status => "canceled" }), :method => :put, :class => "btn btn-warning" %>
          <% when "shipped" %>
            <%= link_to "Mark As Returned", order_path(order, :order => {:status => "returned" }), :method => :put, :class => "btn btn-primary" %>
          <% when "paid" %>
            <%= link_to "Mark As Shipped", order_path(order, :order => {:status => "shipped" }), :method => :put, :class => "btn btn-success" %>
          <% end %>
          <%= link_to 'Edit', edit_order_path(order), :class => 'btn btn-mini' %>
          <%= link_to 'Destroy', order_path(order), :method => :delete, :confirm => 'Are you sure?', :class => 'btn btn-mini btn-danger' %>
        </td>
      </tr>
    <% end %>
  </tbody>

<%= link_to 'New', new_order_path, :class => 'btn btn-primary' %>
